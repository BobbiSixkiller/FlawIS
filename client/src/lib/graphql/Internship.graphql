fragment Application on Intern {
  id
  user {
    id
    name
    email
    studyProgramme
    telephone
    avatarUrl
    address {
      ...Address
    }
  }
  fileUrls
  organizationFeedbackUrl
  status
  semester
  createdAt
  updatedAt
}

query internships(
  $after: String
  $first: Int
  $filter: InternshipFilterInput
  $sort: [InternshipSortInput]!
) {
  internships(after: $after, first: $first, filter: $filter, sort: $sort) {
    totalCount
    academicYears {
      academicYear
      count
    }
    organizations {
      organization
      count
    }
    edges {
      cursor
      node {
        id
        organization
        description
        applicationsCount
        academicYear
        myApplication {
          ...Application
        }
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query internship($id: ObjectId!) {
  internship(id: $id) {
    id
    user
    organization
    description
    updatedAt
    createdAt
    applicationsCount
    myApplication {
      ...Application
    }
  }
}

mutation createInternship($input: InternshipInput!) {
  createInternship(input: $input) {
    message
  }
}

mutation updateInternship($id: ObjectId!, $input: InternshipInput!) {
  updateInternship(id: $id, input: $input) {
    message
    data {
      id
    }
  }
}

mutation deleteInternship($id: ObjectId!) {
  deleteInternship(id: $id) {
    message
    data {
      id
    }
  }
}

query internsExport {
  internsExport {
    user {
      email
      name
      studyProgramme
      telephone
    }
    organization
    status
    semester
  }
}

query interns(
  $after: String
  $first: Int
  $filter: InternFilterInput
  $sort: [InternSortInput]!
) {
  interns(after: $after, first: $first, filter: $filter, sort: $sort) {
    totalCount
    edges {
      cursor
      node {
        ...Application
      }
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}

query intern($id: ObjectId!) {
  intern(id: $id) {
    ...Application
  }
}

mutation createIntern(
  $fileUrls: [String]!
  $internshipId: ObjectId!
  $semester: Semester!
) {
  createIntern(
    fileUrls: $fileUrls
    internshipId: $internshipId
    semester: $semester
  ) {
    message
  }
}

mutation updateInternData(
  $id: ObjectId!
  $fileUrls: [String]!
  $semester: Semester!
) {
  updateInternData(id: $id, fileUrls: $fileUrls, semester: $semester) {
    message
    data {
      internship
    }
  }
}

mutation updateOrgFeedback($fileUrl: String, $id: ObjectId!) {
  updateOrgFeedback(id: $id, fileUrl: $fileUrl) {
    message
    data {
      internship
    }
  }
}

mutation deleteIntern($id: ObjectId!) {
  deleteIntern(id: $id) {
    message
    data {
      internship
    }
  }
}

mutation changeInternStatus($id: ObjectId!, $status: Status!) {
  changeInternStatus(id: $id, status: $status) {
    message
    data {
      internship
    }
  }
}
