fragment Course on Course {
  id
  name
  categories {
    id
    name
    slug
  }
  start
  end
  registrationEnd
  maxAttendees
  description
  price
  billing {
    ...FlawBilling
  }
  isPaid
  createdAt
  updatedAt
}

fragment CourseSession on CourseSession {
  id
  course
  name
  description
  start
  end
  maxAttendees
  createdAt
  updatedAt
}

query courses($after: String, $first: Int, $sort: [CourseSortInput]!) {
  courses(after: $after, first: $first, sort: $sort) {
    totalCount
    edges {
      cursor
      node {
        ...Course
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

query course($id: ObjectId!) {
  course(id: $id) {
    ...Course
  }
}

mutation createCourse($data: CourseInput!) {
  createCourse(data: $data) {
    message
    data {
      ...Course
    }
  }
}

mutation deleteCourse($id: ObjectId!) {
  deleteCourse(id: $id) {
    message
    data {
      ...Course
    }
  }
}

mutation updateCourse($id: ObjectId!, $data: CourseInput!) {
  updateCourse(id: $id, data: $data) {
    message
    data {
      ...Course
    }
  }
}

mutation createCourseSession($data: CourseSessionInput!) {
  createCourseSession(data: $data) {
    message
    data {
      ...CourseSession
    }
  }
}

mutation updateCourseSession($id: ObjectId!, $data: CourseSessionInput!) {
  updateCourseSession(id: $id, data: $data) {
    message
    data {
      ...CourseSession
    }
  }
}
