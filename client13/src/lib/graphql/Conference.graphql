fragment Invoice on Invoice {
  body {
    body
    comment
    dueDate
    issueDate
    price
    type
    vat
    vatDate
  }
  issuer {
    ...Billing
  }
  payer {
    ...Billing
  }
}

fragment Section on Section {
  id
  conference
  translations {
    sk {
      name
      topic
    }
    en {
      name
      topic
    }
  }
}

fragment Ticket on Ticket {
  id
  online
  price
  withSubmission
  translations {
    en {
      name
      description
    }
    sk {
      name
      description
    }
  }
}

fragment Conference on Conference {
  id
  slug
  translations {
    sk {
      name
      logoUrl
    }
    en {
      name
      logoUrl
    }
  }
  dates {
    start
    end
    regEnd
    submissionDeadline
  }
  createdAt
  updatedAt
}

query conferences($after: ObjectId, $first: Int) {
  conferences(after: $after, first: $first) {
    edges {
      cursor
      node {
        ...Conference
      }
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}

query conference($slug: String!) {
  conference(slug: $slug) {
    ...Conference
    sections {
      ...Section
    }
    tickets {
      ...Ticket
    }
    attending {
      invoice {
        ...Invoice
      }
      ticket {
        ...Ticket
      }
      submissions {
        id
        authors {
          id
          name
        }
        section {
          ...Section
        }
        translations {
          sk {
            name
            keywords
            abstract
          }
          en {
            name
            keywords
            abstract
          }
        }
        updatedAt
      }
    }
  }
}

query textSearchConference($text: String!) {
  textSearchConference(text: $text) {
    ...Conference
  }
}

mutation createConference($data: ConferenceInput!) {
  createConference(data: $data) {
    message
  }
}

mutation deleteConference($id: ObjectId!) {
  deleteConference(id: $id) {
    message
    data {
      slug
      translations {
        sk {
          logoUrl
        }
        en {
          logoUrl
        }
      }
      billing {
        stampUrl
      }
    }
  }
}

mutation updateConferenceDates($slug: String!, $data: DatesInput!) {
  updateConferenceDates(slug: $slug, data: $data) {
    message
    data {
      slug
      translations {
        sk {
          name
        }
        en {
          name
        }
      }
    }
  }
}

mutation createSection($data: SectionInput!) {
  createSection(data: $data) {
    message
  }
}

mutation updateSection($id: ObjectId!, $data: SectionInput!) {
  updateSection(id: $id, data: $data) {
    message
  }
}

mutation deleteSection($id: ObjectId!) {
  deleteSection(id: $id)
}

mutation createTicket($slug: String!, $data: TicketInput!) {
  createTicket(slug: $slug, data: $data) {
    message
  }
}

mutation updateTicket(
  $slug: String!
  $ticketId: ObjectId!
  $data: TicketInput!
) {
  updateTicket(slug: $slug, ticketId: $ticketId, data: $data) {
    message
  }
}

mutation deleteTicket($slug: String!, $ticketId: ObjectId!) {
  deleteTicket(slug: $slug, ticketId: $ticketId)
}
